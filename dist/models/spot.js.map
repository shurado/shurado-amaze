{"version":3,"sources":["../../src/models/spot.js"],"names":["module","exports","sequelize","DataTypes","spot","define","location","GEOMETRY","name","STRING","timestamps","associate","models","belongsToMany","feed","through","foreignKey","prototype","addLocation","x","y","create","type","coordinates"],"mappings":";;AACAA,OAAOC,OAAP,GAAiB,UAASC,SAAT,EAAoBC,SAApB,EAA+B;AAC9C,MAAMC,OAAOF,UAAUG,MAAV,CAAiB,MAAjB,EAAyB;AACpCC,cAAUH,UAAUI,QAAV,CAAmB,OAAnB,CAD0B;AAEpCC,UAAML,UAAUM;AAFoB,GAAzB,EAGV;AACDC,gBAAY;AADX,GAHU,CAAb;;AAOAN,OAAKO,SAAL,GAAiB,UAASC,MAAT,EAAiB;AAChCR,SAAKS,aAAL,CAAmBD,OAAOE,IAA1B,EAAgC,EAAEC,SAAS,aAAX,EAA0BC,YAAY,SAAtC,EAAkDN,YAAY,KAA9D,EAAhC;AACD,GAFD;;AAIAN,OAAKa,SAAL,CAAeC,WAAf,GAA6B,gBAAwB;AAAA,QAAbC,CAAa,QAAbA,CAAa;AAAA,QAAVC,CAAU,QAAVA,CAAU;AAAA,QAAPZ,IAAO,QAAPA,IAAO;;AACnD,WAAOJ,KAAKiB,MAAL,CAAY;AACjBb,gBADiB;AAEjBF,gBAAU;AACRgB,cAAM,OADE;AAERC,qBAAa,CAACJ,CAAD,EAAIC,CAAJ;AAFL;AAFO,KAAZ,CAAP;AAOD,GARD;;AAUA,SAAOhB,IAAP;AACD,CAvBD","file":"spot.js","sourcesContent":["\nmodule.exports = function(sequelize, DataTypes) {\n  const spot = sequelize.define('spot', {\n    location: DataTypes.GEOMETRY('POINT'),\n    name: DataTypes.STRING\n  }, {\n    timestamps: false\n  });\n\n  spot.associate = function(models) {\n    spot.belongsToMany(models.feed, { through: 'spots_feeds', foreignKey: 'spot_id',  timestamps: false });\n  }\n\n  spot.prototype.addLocation = function({ x, y, name}) {\n    return spot.create({\n      name,\n      location: {\n        type: 'Point',\n        coordinates: [x, y]\n      }\n    })\n  }\n\n  return spot;\n};\n"]}