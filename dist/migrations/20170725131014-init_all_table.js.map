{"version":3,"sources":["../../src/migrations/20170725131014-init_all_table.js"],"names":["Sequelize","require","primaryID","type","INTEGER","primaryKey","autoIncrement","timestamp","allowNull","DATE","module","exports","up","queryInterface","createTable","id","createdAt","defaultValue","NOW","updatedAt","encrypted_password","STRING","introduction","TEXT","auth_token","username","nickname","website","genger","ENUM","then","addIndex","location","name","down","dropTable"],"mappings":"AAAA;;AACA,IAAMA,YAAYC,QAAQ,WAAR,CAAlB;;AAEA,IAAMC,YAAY,SAAZA,SAAY,CAACF,SAAD;AAAA,SAAgB;AAChCG,UAAMH,UAAUI,OADgB;AAEhCC,gBAAY,IAFoB;AAGhCC,mBAAe;AAHiB,GAAhB;AAAA,CAAlB;;AAMA,IAAMC,YAAY,SAAZA,SAAY,CAACP,SAAD;AAAA,SAAgB;AAChCQ,eAAW,KADqB;AAEhCL,UAAMH,UAAUS;AAFgB,GAAhB;AAAA,CAAlB;;AAKAC,OAAOC,OAAP,GAAiB;AACfC,MAAI,YAAUC,cAAV,EAA0Bb,SAA1B,EAAqC;AACvC;AACAa,mBAAeC,WAAf,CACE,OADF,EAEE;AACEC,UAAIb,UAAUF,SAAV,CADN;AAEEgB,iBAAW;AACTb,cAAMH,UAAUS,IADP;AAETQ,sBAAcjB,UAAUkB;AAFf,OAFb;AAMEC,iBAAW;AACThB,cAAMH,UAAUS,IADP;AAETQ,sBAAcjB,UAAUkB;AAFf,OANb;AAUEE,0BAAoB;AAClBjB,cAAMH,UAAUqB;AADE,OAVtB;AAaEC,oBAAc;AACZnB,cAAMH,UAAUuB;AADJ,OAbhB;AAgBEC,kBAAY;AACVrB,cAAMH,UAAUqB;AADN,OAhBd;AAmBEI,gBAAU;AACRtB,cAAMH,UAAUqB;AADR,OAnBZ;AAsBEK,gBAAU;AACRvB,cAAMH,UAAUqB;AADR,OAtBZ;AAyBEM,eAAS;AACPxB,cAAMH,UAAUqB;AADT,OAzBX;AA4BEO,cAAQ;AACNzB,cAAMH,UAAU6B,IAAV,CAAe,MAAf,EAAuB,QAAvB;AADA;AA5BV,KAFF,EAkCEC,IAlCF,CAkCO;AAAA,aAAMjB,eAAekB,QAAf,CAAwB,OAAxB,EAAiC,CAAC,UAAD,EAAa,UAAb,CAAjC,CAAN;AAAA,KAlCP;;AAoCAlB,mBAAeC,WAAf,CAA2B,OAA3B,EAAoC;AAClCC,UAAIb,UAAUF,SAAV,CAD8B;AAElCgC,gBAAU;AACR7B,cAAM;AADE,OAFwB;AAKlC8B,YAAM;AACJ9B,cAAMH,UAAUqB;AADZ;AAL4B,KAApC;AASD,GAhDc;;AAkDfa,QAAM,cAAUrB,cAAV,EAA0Bb,SAA1B,EAAqC;AACzCa,mBAAesB,SAAf,CAAyB,OAAzB;AACAtB,mBAAesB,SAAf,CAAyB,OAAzB;AACAtB,mBAAesB,SAAf,CAAyB,UAAzB;AACAtB,mBAAesB,SAAf,CAAyB,OAAzB;AACD;AAvDc,CAAjB","file":"20170725131014-init_all_table.js","sourcesContent":["'use strict';\nconst Sequelize = require('Sequelize');\n\nconst primaryID = (Sequelize) => ({\n  type: Sequelize.INTEGER,\n  primaryKey: true,\n  autoIncrement: true,\n});\n\nconst timestamp = (Sequelize) => ({\n  allowNull: false,\n  type: Sequelize.DATE,\n});\n\nmodule.exports = {\n  up: function (queryInterface, Sequelize) {\n    /* create user */\n    queryInterface.createTable(\n      'users',\n      {\n        id: primaryID(Sequelize),\n        createdAt: {\n          type: Sequelize.DATE,\n          defaultValue: Sequelize.NOW\n        },\n        updatedAt: {\n          type: Sequelize.DATE,\n          defaultValue: Sequelize.NOW\n        },\n        encrypted_password: {\n          type: Sequelize.STRING\n        },\n        introduction: {\n          type: Sequelize.TEXT\n        },\n        auth_token: {\n          type: Sequelize.STRING\n        },\n        username: {\n          type: Sequelize.STRING\n        },\n        nickname: {\n          type: Sequelize.STRING\n        },\n        website: {\n          type: Sequelize.STRING,\n        },\n        genger: {\n          type: Sequelize.ENUM('male', 'female')\n        }\n      }\n    ).then(() => queryInterface.addIndex('users', ['nickname', 'username']));\n\n    queryInterface.createTable('spots', {\n      id: primaryID(Sequelize),\n      location: {\n        type: 'Point'\n      },\n      name: {\n        type: Sequelize.STRING\n      }\n    });\n  },\n\n  down: function (queryInterface, Sequelize) {\n    queryInterface.dropTable('users')\n    queryInterface.dropTable('feeds')\n    queryInterface.dropTable('comments')\n    queryInterface.dropTable('spots')\n  }\n};\n"]}