{"version":3,"sources":["../../src/migrations/20170728162108-add_state_to_comment.js"],"names":["module","exports","up","queryInterface","Sequelize","addColumn","type","ENUM","defaultValue","allowNull","then","addIndex","down","removeColumn","removeIndex"],"mappings":"AAAA;;AAEAA,OAAOC,OAAP,GAAiB;AACfC,MAAI,YAAUC,cAAV,EAA0BC,SAA1B,EAAqC;AACvCD,mBAAeE,SAAf,CAAyB,UAAzB,EAAqC,QAArC,EAA+C;AAC7CC,YAAMF,UAAUG,IAAV,CAAe,SAAf,EAA0B,QAA1B,EAAoC,WAApC,CADuC;AAE7CC,oBAAc,WAF+B;AAG7CC,iBAAW;AAHkC,KAA/C,EAIGC,IAJH,CAIQ,YAAM;AACZP,qBAAeQ,QAAf,CAAwB,UAAxB,EAAoC,CAAC,QAAD,EAAW,MAAX,CAApC;AACD,KAND;AAOD,GATc;;AAWfC,QAAM,cAAUT,cAAV,EAA0BC,SAA1B,EAAqC;AACzC;;;;;;;AAQAD,mBAAeU,YAAf,CAA4B,UAA5B,EAAwC,QAAxC,EAAkDH,IAAlD,CAAuD,YAAM;AAC3DP,qBAAeW,WAAf,CAA2B,UAA3B,EAAuC,CAAC,QAAD,EAAW,MAAX,CAAvC;AACD,KAFD;AAGD;AAvBc,CAAjB","file":"20170728162108-add_state_to_comment.js","sourcesContent":["'use strict';\n\nmodule.exports = {\n  up: function (queryInterface, Sequelize) {\n    queryInterface.addColumn('comments', 'status', {\n      type: Sequelize.ENUM('deleted', 'edited', 'published'),\n      defaultValue: 'published',\n      allowNull: false\n    }).then(() => {\n      queryInterface.addIndex('comments', ['status', 'text']);\n    })\n  },\n\n  down: function (queryInterface, Sequelize) {\n    /*\n      Add reverting commands here.\n      Return a promise to correctly handle asynchronicity.\n\n      Example:\n      return queryInterface.dropTable('users');\n    */\n   \n    queryInterface.removeColumn('comments', 'status').then(() => {\n      queryInterface.removeIndex('comments', ['status', 'text']);\n    });\n  }\n};\n"]}