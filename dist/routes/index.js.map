{"version":3,"sources":["../../src/routes/index.js"],"names":["require","Router","passport","WebParser","feedController","userController","uploadController","profileController","route","get","req","res","render","html","jwtAuthenticate","authenticate","session","post","body","url","parseWeb","then","json","result","catch","status","message","error","use","module","exports"],"mappings":";;eACmBA,QAAQ,SAAR,C;IAAXC,M,YAAAA,M;;AACR,IAAMC,WAAWF,QAAQ,UAAR,CAAjB;;AAEA,IAAMG,YAAYH,QAAQ,uBAAR,CAAlB;AACA,IAAMI,iBAAiBJ,QAAQ,gCAAR,CAAvB;AACA,IAAMK,iBAAiBL,QAAQ,gCAAR,CAAvB;AACA,IAAMM,mBAAmBN,QAAQ,kCAAR,CAAzB;AACA,IAAMO,oBAAoBP,QAAQ,mCAAR,CAA1B;;AAEA,IAAMQ,QAAQ,IAAIP,MAAJ,EAAd;;AAEAO,MAAMC,GAAN,CAAU,GAAV,EAAe,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC3BA,MAAIC,MAAJ,CAAW,OAAX,EAAoB,EAAEC,MAAM,GAAR,EAApB;AACD,CAFD;;AAIA,IAAMC,kBAAkBZ,SAASa,YAAT,CAAsB,KAAtB,EAA6B,EAAEC,SAAS,KAAX,EAA7B,CAAxB;;AAEA;;AAEAR,MAAMS,IAAN,CAAW,YAAX,EAAyBH,eAAzB,EAA0C,UAACJ,GAAD,EAAMC,GAAN,EAAc;AACtD,MAAID,IAAIQ,IAAJ,CAASC,GAAb,EAAkB;AAChBhB,cAAUiB,QAAV,CAAmBV,IAAIQ,IAAJ,CAASC,GAA5B,EACGE,IADH,CACQ;AAAA,aAAUV,IAAIW,IAAJ,CAASC,MAAT,CAAV;AAAA,KADR,EAEGC,KAFH,CAES,iBAAS;AACdb,UAAIc,MAAJ,CAAW,GAAX;AACAd,UAAIW,IAAJ,CAAS,EAAEI,SAASC,MAAMD,OAAjB,EAAT;AACD,KALH;AAMD,GAPD,MAOO;AACLf,QAAIc,MAAJ,CAAW,GAAX,EAAgBH,IAAhB,CAAqB,EAAEI,SAAS,sBAAX,EAArB;AACD;AACF,CAXD;;AAaAlB,MACGoB,GADH,CACO,SADP,EACkBtB,gBADlB,EAEGsB,GAFH,CAEO,UAFP,EAEmBrB,iBAFnB,EAGGqB,GAHH,CAGO,YAHP,EAGqBxB,cAHrB,EAIGwB,GAJH,CAIO,WAJP,EAIoBvB,cAJpB;;AAOAwB,OAAOC,OAAP,GAAiBtB,KAAjB","file":"index.js","sourcesContent":["\nconst { Router } = require('express');\nconst passport = require('passport');\n\nconst WebParser = require('../services/WebParser');\nconst feedController = require('../controllers/feed_controller');\nconst userController = require('../controllers/user_controller');\nconst uploadController = require('../controllers/upload_controller');\nconst profileController = require('../controllers/profile_controller');\n\nconst route = new Router();\n\nroute.get('/', (req, res) => {\n  res.render('index', { html: 123 })\n});\n\nconst jwtAuthenticate = passport.authenticate('jwt', { session: false });\n\n// route.get('/user/login', jwtAuthenticate, (req, res) => res.redirect(301, '/'));\n\nroute.post('/api/parse', jwtAuthenticate, (req, res) => {  \n  if (req.body.url) {\n    WebParser.parseWeb(req.body.url)\n      .then(result => res.json(result))\n      .catch(error => {\n        res.status(400);\n        res.json({ message: error.message });\n      })  \n  } else {\n    res.status(400).json({ message: 'missing fields `url`' })  \n  }\n});\n\nroute\n  .use('/upload', uploadController)\n  .use('/profile', profileController)\n  .use('/api/feeds', feedController)\n  .use('/api/user', userController)\n\n\nmodule.exports = route;\n\n"]}